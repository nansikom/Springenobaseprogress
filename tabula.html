<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PostgreSQL Frontend</title>

  <!-- Tabulator CSS -->
  <link href="https://unpkg.com/tabulator-tables@5.4.3/dist/css/tabulator.min.css" rel="stylesheet">

  <!-- Tabulator JS (using 5.4.3 version) -->
  <script src="https://unpkg.com/tabulator-tables@5.4.3/dist/js/tabulator.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <style>
    /* Optional: Add some spacing */
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    #example-table {
      margin-top: 20px;
      height: 300px; /* Required for Tabulator to display properly */
    }
    .tabulator-header {
      background-color: purple;
      color: purple;
    }
    .tabulator-header .tabulator-col {
      color: black;
    
    }
  </style>
</head>
<body>

  <h1>PostgreSQL Frontend</h1>

  <h2>Add Numbers</h2>
  <input type="number" id="num1" placeholder="Enter first number">
  <input type="number" id="num2" placeholder="Enter second number">
  <button onclick="addNumbers()">Add</button>
  <p id="add-result"></p>

  <h2>Calculate Overall Price</h2>
  <button onclick="calculateOverallPrice()">Calculate</button>
  <p id="price-result"></p>

  <!-- Tabulator Table -->
  <div id="example-table"></div>
  
  <!-- JavaScript -->
  <script>
    // Function to call backend for number addition
    async function addNumbers() {
      const num1 = document.getElementById('num1').value;
      const num2 = document.getElementById('num2').value;

      const response = await fetch(`http://localhost:3000/add-numbers?a=${num1}&b=${num2}`);
      const data = await response.json();
      document.getElementById('add-result').innerText = `Sum: ${data.sum}`;
    }

    // Function to call backend for price calculation
    async function calculateOverallPrice() {
      const response = await fetch('http://localhost:3000/calculate-overall-price');
      const data = await response.json();
      document.getElementById('price-result').innerText = `Total Price: ${data.total_price}`;
    }

    // Initialize Tabulator Table
    document.addEventListener("DOMContentLoaded", function () {
      if (typeof Tabulator === 'undefined') {
          console.error('Tabulator library is not loaded');
          return;
        }
      var table = new Tabulator("#example-table", {
  data: [
    { item: "Pen", qty: 3, price: 2 },
    { item: "Notebook", qty: 1, price: 5 },
    { item: "Eraser", qty: 2, price: 1 },
    { item: "Pencil", qty: 10, price: 0.5 },
    { item: "Ruler", qty: 5, price: 1.2 },
    { item: "Marker", qty: 4, price: 3 },
    { item: "Scissors", qty: 2, price: 2.5 },
    { item: "Stapler", qty: 1, price: 6 },
    { item: "Paper Clips", qty: 20, price: 0.1 },
    { item: "Highlighter", qty: 6, price: 1.8 }
  ],
  layout: "fitColumns",
  columns: [
    { title: "Item", field: "item", editor: "input" },
    { title: "Qty", field: "qty", editor: "number" },
    { title: "Price", field: "price", editor: "number" },
    {
      title: "Total",
      field: "total",
      mutator: (value, data) => data.qty * data.price
    }
  ]
});

    });
  </script>

</body>
</html>
